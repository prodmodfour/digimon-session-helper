// Pre-built attack database for common Digimon attacks - DDA 1.4 format
// GMs can select from these when creating Digimon
// Attacks have: [Range] + [Type] + quality-based tags + optional effect + description

export interface AttackTemplate {
  id: string
  name: string
  range: 'melee' | 'ranged' // [Melee] or [Ranged] - free tag
  type: 'damage' | 'support' // [Damage] or [Support] - free tag
  tags: string[] // Quality-based tags (e.g., "Weapon II", "Area Attack: Burst")
  effect?: string // Optional effect (e.g., "Poison 3", "Paralysis")
  description: string // Flavor text
  stage: 'any' | 'fresh' | 'in-training' | 'rookie' | 'champion' | 'ultimate' | 'mega' | 'ultra'
}

export const ATTACK_DATABASE: AttackTemplate[] = [
  // === FRESH STAGE ===
  {
    id: 'bubble-blow',
    name: 'Bubble Blow',
    range: 'ranged',
    type: 'damage',
    tags: [],
    description: 'Shoots harmless bubbles at the target.',
    stage: 'fresh',
  },
  {
    id: 'san-no-awa',
    name: 'San no Awa',
    range: 'ranged',
    type: 'damage',
    tags: [],
    effect: 'Poison 1',
    description: 'Spits out acidic bubbles.',
    stage: 'fresh',
  },

  // === IN-TRAINING STAGE ===
  {
    id: 'tackle',
    name: 'Tackle',
    range: 'melee',
    type: 'damage',
    tags: [],
    description: 'A basic charging attack.',
    stage: 'in-training',
  },
  {
    id: 'acid-bubbles',
    name: 'Acid Bubbles',
    range: 'ranged',
    type: 'damage',
    tags: [],
    effect: 'Poison 1',
    description: 'Shoots acidic bubbles that sting on contact.',
    stage: 'in-training',
  },
  {
    id: 'small-fire',
    name: 'Small Fire',
    range: 'ranged',
    type: 'damage',
    tags: [],
    description: 'Breathes a small flame.',
    stage: 'in-training',
  },
  {
    id: 'tail-slap',
    name: 'Tail Slap',
    range: 'melee',
    type: 'damage',
    tags: [],
    description: 'Slaps the target with its tail.',
    stage: 'in-training',
  },

  // === ROOKIE STAGE ===
  {
    id: 'pepper-breath',
    name: 'Pepper Breath',
    range: 'ranged',
    type: 'damage',
    tags: ['Weapon I'],
    description: 'Spits a ball of flame at the enemy.',
    stage: 'rookie',
  },
  {
    id: 'blue-blaster',
    name: 'Blue Blaster',
    range: 'ranged',
    type: 'damage',
    tags: ['Weapon I'],
    description: 'Fires a stream of blue flames.',
    stage: 'rookie',
  },
  {
    id: 'spiral-twister',
    name: 'Spiral Twister',
    range: 'ranged',
    type: 'damage',
    tags: ['Certain Strike'],
    description: 'Creates a spiral of green flames.',
    stage: 'rookie',
  },
  {
    id: 'super-thunder-strike',
    name: 'Super Thunder Strike',
    range: 'ranged',
    type: 'damage',
    tags: ['Weapon I'],
    effect: 'Paralysis',
    description: 'Releases an electric shock.',
    stage: 'rookie',
  },
  {
    id: 'poison-ivy',
    name: 'Poison Ivy',
    range: 'melee',
    type: 'damage',
    tags: [],
    effect: 'Poison 2',
    description: 'Attacks with poisonous vines.',
    stage: 'rookie',
  },
  {
    id: 'boom-bubble',
    name: 'Boom Bubble',
    range: 'ranged',
    type: 'damage',
    tags: ['Certain Strike'],
    description: 'Fires a compressed air bubble.',
    stage: 'rookie',
  },
  {
    id: 'lightning-paw',
    name: 'Lightning Paw',
    range: 'melee',
    type: 'damage',
    tags: ['Weapon I', 'Certain Strike'],
    description: 'A lightning-fast punch.',
    stage: 'rookie',
  },
  {
    id: 'marching-fishes',
    name: 'Marching Fishes',
    range: 'ranged',
    type: 'damage',
    tags: ['Weapon II', 'Area Attack: Burst'],
    description: 'Summons a school of fish to attack multiple targets.',
    stage: 'rookie',
  },
  {
    id: 'vee-headbutt',
    name: 'Vee Headbutt',
    range: 'melee',
    type: 'damage',
    tags: ['Charge Attack'],
    description: 'Charges head-first into the target.',
    stage: 'rookie',
  },
  {
    id: 'super-shocker',
    name: 'Super Shocker',
    range: 'ranged',
    type: 'damage',
    tags: ['Area Attack: Cone'],
    effect: 'Paralysis',
    description: 'Discharges electricity in a cone.',
    stage: 'rookie',
  },
  {
    id: 'diamond-shell',
    name: 'Diamond Shell',
    range: 'melee',
    type: 'support',
    tags: ['Defend'],
    description: 'Curls into a protective shell, increasing armor.',
    stage: 'rookie',
  },

  // === CHAMPION STAGE ===
  {
    id: 'nova-blast',
    name: 'Nova Blast',
    range: 'ranged',
    type: 'damage',
    tags: ['Weapon III', 'Signature Move'],
    description: 'Fires a massive fireball.',
    stage: 'champion',
  },
  {
    id: 'howling-blaster',
    name: 'Howling Blaster',
    range: 'ranged',
    type: 'damage',
    tags: ['Weapon III', 'Signature Move'],
    description: 'Unleashes a powerful ice beam.',
    stage: 'champion',
  },
  {
    id: 'electro-shocker',
    name: 'Electro Shocker',
    range: 'ranged',
    type: 'damage',
    tags: ['Weapon III'],
    effect: 'Paralysis',
    description: 'Fires a ball of electricity.',
    stage: 'champion',
  },
  {
    id: 'hand-of-fate',
    name: 'Hand of Fate',
    range: 'ranged',
    type: 'damage',
    tags: ['Weapon IV', 'Armor Piercing I'],
    description: 'Fires a beam of holy energy.',
    stage: 'champion',
  },
  {
    id: 'meteor-wing',
    name: 'Meteor Wing',
    range: 'ranged',
    type: 'damage',
    tags: ['Weapon II', 'Area Attack: Blast'],
    description: 'Rains down fireballs from above.',
    stage: 'champion',
  },
  {
    id: 'great-horn-attack',
    name: 'Great Horn Attack',
    range: 'melee',
    type: 'damage',
    tags: ['Weapon IV', 'Charge Attack'],
    description: 'A powerful charging horn attack.',
    stage: 'champion',
  },
  {
    id: 'harpoon-torpedo',
    name: 'Harpoon Torpedo',
    range: 'ranged',
    type: 'damage',
    tags: ['Weapon II', 'Certain Strike'],
    description: 'Fires torpedo-like projectiles.',
    stage: 'champion',
  },
  {
    id: 'lightning-claw',
    name: 'Lightning Claw',
    range: 'melee',
    type: 'damage',
    tags: ['Weapon II', 'Certain Strike'],
    description: 'Rapid claw strikes.',
    stage: 'champion',
  },
  {
    id: 'needle-spray',
    name: 'Needle Spray',
    range: 'ranged',
    type: 'damage',
    tags: ['Weapon II', 'Area Attack: Cone'],
    description: 'Fires a barrage of needles.',
    stage: 'champion',
  },
  {
    id: 'spiking-strike',
    name: 'Spiking Strike',
    range: 'melee',
    type: 'damage',
    tags: ['Weapon III', 'Armor Piercing I'],
    description: 'A spike-enhanced strike.',
    stage: 'champion',
  },
  {
    id: 'heaven-knuckle',
    name: "Heaven's Knuckle",
    range: 'ranged',
    type: 'damage',
    tags: ['Weapon III', 'Armor Piercing I'],
    description: 'Fires a holy beam from its fist.',
    stage: 'champion',
  },
  {
    id: 'heal',
    name: 'Heal',
    range: 'ranged',
    type: 'support',
    tags: ['Healing'],
    description: 'Heals an ally by a small amount.',
    stage: 'champion',
  },

  // === ULTIMATE STAGE ===
  {
    id: 'giga-blaster',
    name: 'Giga Blaster',
    range: 'ranged',
    type: 'damage',
    tags: ['Weapon V', 'Area Attack: Blast', 'Signature Move'],
    description: 'Fires missiles from its chest.',
    stage: 'ultimate',
  },
  {
    id: 'metal-wolf-claw',
    name: 'Metal Wolf Claw',
    range: 'melee',
    type: 'damage',
    tags: ['Weapon V', 'Certain Strike', 'Armor Piercing II'],
    description: 'Freezing claw attack.',
    stage: 'ultimate',
  },
  {
    id: 'gate-of-destiny',
    name: 'Gate of Destiny',
    range: 'ranged',
    type: 'damage',
    tags: ['Weapon VI', 'Signature Move', 'Armor Piercing II'],
    description: 'Opens a portal that banishes enemies.',
    stage: 'ultimate',
  },
  {
    id: 'wing-blade',
    name: 'Wing Blade',
    range: 'ranged',
    type: 'damage',
    tags: ['Weapon IV', 'Certain Strike', 'Area Attack: Line'],
    description: 'Fires flaming feathers like missiles.',
    stage: 'ultimate',
  },
  {
    id: 'vulcans-hammer',
    name: "Vulcan's Hammer",
    range: 'melee',
    type: 'damage',
    tags: ['Weapon VI', 'Armor Piercing II'],
    description: 'A devastating hammer strike.',
    stage: 'ultimate',
  },
  {
    id: 'horn-buster',
    name: 'Horn Buster',
    range: 'melee',
    type: 'damage',
    tags: ['Weapon V', 'Charge Attack'],
    effect: 'Paralysis',
    description: 'Charges with electrified horn.',
    stage: 'ultimate',
  },
  {
    id: 'celestial-arrow',
    name: 'Celestial Arrow',
    range: 'ranged',
    type: 'damage',
    tags: ['Weapon V', 'Certain Strike', 'Armor Piercing II'],
    description: 'Fires an arrow of pure light.',
    stage: 'ultimate',
  },
  {
    id: 'river-of-power',
    name: 'River of Power',
    range: 'ranged',
    type: 'damage',
    tags: ['Weapon V', 'Area Attack: Line'],
    description: 'Fires a powerful energy beam.',
    stage: 'ultimate',
  },
  {
    id: 'ultimate-heal',
    name: 'Ultimate Heal',
    range: 'ranged',
    type: 'support',
    tags: ['Healing', 'Area Attack: Burst'],
    description: 'Heals all nearby allies.',
    stage: 'ultimate',
  },

  // === MEGA STAGE ===
  {
    id: 'terra-force',
    name: 'Terra Force',
    range: 'ranged',
    type: 'damage',
    tags: ['Weapon VIII', 'Signature Move', 'Area Attack: Blast'],
    description: 'Gathers energy from the planet to create a massive fireball.',
    stage: 'mega',
  },
  {
    id: 'metal-wolf-sniper',
    name: 'Metal Wolf Sniper',
    range: 'ranged',
    type: 'damage',
    tags: ['Weapon VII', 'Certain Strike', 'Armor Piercing III'],
    description: 'Fires a precision ice beam from chest.',
    stage: 'mega',
  },
  {
    id: 'strike-of-the-seven-stars',
    name: 'Strike of the Seven Stars',
    range: 'ranged',
    type: 'damage',
    tags: ['Weapon IX', 'Signature Move', 'Armor Piercing III'],
    description: 'Creates seven orbs of holy energy that strike the enemy.',
    stage: 'mega',
  },
  {
    id: 'crimson-flame',
    name: 'Crimson Flame',
    range: 'ranged',
    type: 'damage',
    tags: ['Weapon VII', 'Area Attack: Cone'],
    description: 'Releases a wave of crimson flames.',
    stage: 'mega',
  },
  {
    id: 'giga-scissor-claw',
    name: 'Giga Scissor Claw',
    range: 'melee',
    type: 'damage',
    tags: ['Weapon VIII', 'Armor Piercing III'],
    description: 'Crushes the enemy with massive claws.',
    stage: 'mega',
  },
  {
    id: 'positron-laser',
    name: 'Positron Laser',
    range: 'ranged',
    type: 'damage',
    tags: ['Weapon VII', 'Certain Strike', 'Armor Piercing II'],
    description: 'Fires a beam of positron energy.',
    stage: 'mega',
  },
  {
    id: 'omni-sword',
    name: 'Omni Sword',
    range: 'melee',
    type: 'damage',
    tags: ['Weapon X', 'Armor Piercing III', 'Signature Move'],
    description: 'A divine sword strike that can cut through anything.',
    stage: 'mega',
  },
  {
    id: 'grey-sword',
    name: 'Grey Sword',
    range: 'melee',
    type: 'damage',
    tags: ['Weapon IX', 'Armor Piercing III'],
    description: 'Slashes with its massive sword.',
    stage: 'mega',
  },
  {
    id: 'giga-death',
    name: 'Giga Death',
    range: 'ranged',
    type: 'damage',
    tags: ['Weapon VIII', 'Area Attack: Blast', 'Armor Piercing II'],
    description: 'Fires destructive energy from all weapons.',
    stage: 'mega',
  },
  {
    id: 'eden-javelin',
    name: "Eden's Javelin",
    range: 'ranged',
    type: 'damage',
    tags: ['Weapon IX', 'Certain Strike', 'Armor Piercing III'],
    description: 'Throws a javelin of pure light.',
    stage: 'mega',
  },
  {
    id: 'supreme-cannon',
    name: 'Supreme Cannon',
    range: 'ranged',
    type: 'damage',
    tags: ['Weapon X', 'Area Attack: Line', 'Armor Piercing III'],
    description: 'Fires a devastating energy beam.',
    stage: 'mega',
  },

  // === ULTRA STAGE ===
  {
    id: 'alpha-inforce',
    name: 'Alpha inForce',
    range: 'melee',
    type: 'damage',
    tags: ['Weapon XII', 'Signature Move', 'Armor Piercing IV'],
    description: 'A legendary sword technique that transcends time.',
    stage: 'ultra',
  },
  {
    id: 'omega-inforce',
    name: 'Omega inForce',
    range: 'melee',
    type: 'damage',
    tags: ['Weapon XII', 'Signature Move', 'Armor Piercing IV'],
    description: 'A forbidden technique that rewinds time.',
    stage: 'ultra',
  },
  {
    id: 'grace-cross-freezer',
    name: 'Grace Cross Freezer',
    range: 'ranged',
    type: 'damage',
    tags: ['Weapon XI', 'Area Attack: Blast', 'Armor Piercing IV'],
    effect: 'Slow',
    description: 'Freezes the surrounding area with absolute zero ice.',
    stage: 'ultra',
  },

  // === ANY STAGE (Universal attacks) ===
  {
    id: 'basic-attack',
    name: 'Basic Attack',
    range: 'melee',
    type: 'damage',
    tags: [],
    description: 'A standard physical attack.',
    stage: 'any',
  },
  {
    id: 'guard',
    name: 'Guard',
    range: 'melee',
    type: 'support',
    tags: ['Defend'],
    description: 'Take a defensive stance, increasing armor temporarily.',
    stage: 'any',
  },
  {
    id: 'distracting-strike',
    name: 'Distracting Strike',
    range: 'melee',
    type: 'damage',
    tags: [],
    effect: 'Distracted',
    description: 'A quick strike that distracts the enemy.',
    stage: 'any',
  },
  {
    id: 'ranged-strike',
    name: 'Ranged Strike',
    range: 'ranged',
    type: 'damage',
    tags: [],
    description: 'A basic ranged attack.',
    stage: 'any',
  },
]

// Get attacks by stage (includes 'any' stage attacks)
export function getAttacksForStage(stage: string): AttackTemplate[] {
  return ATTACK_DATABASE.filter((a) => a.stage === stage || a.stage === 'any')
}

// Get all unique tags
export function getAllTags(): string[] {
  const tags = new Set<string>()
  ATTACK_DATABASE.forEach((a) => a.tags.forEach((t) => tags.add(t)))
  return Array.from(tags).sort()
}

// Search attacks
export function searchAttacks(query: string): AttackTemplate[] {
  const lower = query.toLowerCase()
  return ATTACK_DATABASE.filter(
    (a) =>
      a.name.toLowerCase().includes(lower) ||
      a.description.toLowerCase().includes(lower) ||
      a.tags.some((t) => t.toLowerCase().includes(lower))
  )
}
